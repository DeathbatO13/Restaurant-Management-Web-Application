(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{276:(e,a,s)=>{Promise.resolve().then(s.bind(s,9004))},9004:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>ex});var t=s(5155),r=s(2115),i=s(9708),l=s(2085),n=s(2596),d=s(9688);function o(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,d.QP)((0,n.$)(a))}let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=r.forwardRef((e,a)=>{let{className:s,variant:r,size:l,asChild:n=!1,...d}=e,m=n?i.DX:"button";return(0,t.jsx)(m,{className:o(c({variant:r,size:l,className:s})),ref:a,...d})});m.displayName="Button";let x=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});x.displayName="Card";let p=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:o("flex flex-col space-y-1.5 p-6",s),...r})});p.displayName="CardHeader";let b=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:o("text-2xl font-semibold leading-none tracking-tight",s),...r})});b.displayName="CardTitle";let u=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:o("text-sm text-muted-foreground",s),...r})});u.displayName="CardDescription";let h=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:o("p-6 pt-0",s),...r})});h.displayName="CardContent",r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("div",{ref:a,className:o("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";let f=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function g(e){let{className:a,variant:s,...r}=e;return(0,t.jsx)("div",{className:o(f({variant:s}),a),...r})}var j=s(3470),y=s(4416);let N=j.bL,v=j.l9;j.bm;let w=j.ZL,C=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(j.hJ,{className:o("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:a})});C.displayName=j.hJ.displayName;let k=(0,l.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),_=r.forwardRef((e,a)=>{let{side:s="right",className:r,children:i,...l}=e;return(0,t.jsxs)(w,{children:[(0,t.jsx)(C,{}),(0,t.jsxs)(j.UC,{ref:a,className:o(k({side:s}),r),...l,children:[i,(0,t.jsxs)(j.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,t.jsx)(y.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});_.displayName=j.UC.displayName;let A=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:o("flex flex-col space-y-2 text-center sm:text-left",a),...s})};A.displayName="SheetHeader";let T=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(j.hE,{ref:a,className:o("text-lg font-semibold text-foreground",s),...r})});T.displayName=j.hE.displayName;let F=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(j.VY,{ref:a,className:o("text-sm text-muted-foreground",s),...r})});F.displayName=j.VY.displayName;let S=r.forwardRef((e,a)=>{let{className:s,type:r,...i}=e;return(0,t.jsx)("input",{type:r,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...i})});S.displayName="Input";var D=s(968);let P=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(D.b,{ref:a,className:o(P(),s),...r})});R.displayName=D.b.displayName;let E=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)("textarea",{className:o("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:a,...r})});E.displayName="Textarea";var O=s(7489);let z=r.forwardRef((e,a)=>{let{className:s,orientation:r="horizontal",decorative:i=!0,...l}=e;return(0,t.jsx)(O.b,{ref:a,decorative:i,orientation:r,className:o("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...l})});z.displayName=O.b.displayName;var L=s(7312),I=s(5747),$=s(8564),M=s(7809),q=s(4516),V=s(7712),B=s(4616),U=s(2525),Y=s(1586),J=s(1007),H=s(1264),G=s(9420);let Z=j.bL;j.l9;let Q=j.ZL;j.bm;let X=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(j.hJ,{ref:a,className:o("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r})});X.displayName=j.hJ.displayName;let K=r.forwardRef((e,a)=>{let{className:s,children:r,...i}=e;return(0,t.jsxs)(Q,{children:[(0,t.jsx)(X,{}),(0,t.jsxs)(j.UC,{ref:a,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...i,children:[r,(0,t.jsxs)(j.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(y.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});K.displayName=j.UC.displayName;let W=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:o("flex flex-col space-y-1.5 text-center sm:text-left",a),...s})};W.displayName="DialogHeader";let ee=e=>{let{className:a,...s}=e;return(0,t.jsx)("div",{className:o("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...s})};ee.displayName="DialogFooter";let ea=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(j.hE,{ref:a,className:o("text-lg font-semibold leading-none tracking-tight",s),...r})});ea.displayName=j.hE.displayName,r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(j.VY,{ref:a,className:o("text-sm text-muted-foreground",s),...r})}).displayName=j.VY.displayName;var es=s(6766),et=s(9152),er=s(6474);let ei=et.bL,el=r.forwardRef((e,a)=>{let{className:s,...r}=e;return(0,t.jsx)(et.q7,{ref:a,className:o("border-b",s),...r})});el.displayName="AccordionItem";let en=r.forwardRef((e,a)=>{let{className:s,children:r,...i}=e;return(0,t.jsx)(et.Y9,{className:"flex",children:(0,t.jsxs)(et.l9,{ref:a,className:o("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...i,children:[r,(0,t.jsx)(er.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});en.displayName=et.l9.displayName;let ed=r.forwardRef((e,a)=>{let{className:s,children:r,...i}=e;return(0,t.jsx)(et.UC,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,t.jsx)("div",{className:o("pb-4 pt-0",s),children:r})})});ed.displayName=et.UC.displayName;let eo=[{key:"carnes_y_parrilla",label:"Carnes y Parrilla"},{key:"pollo",label:"Pollo"},{key:"cerdo",label:"Cerdo"},{key:"pescados_y_mariscos",label:"Pescados y Mariscos"}],ec=[{key:"bebidas_naturales",label:"Bebidas Naturales"},{key:"bebidas_comerciales",label:"Bebidas Comerciales"},{key:"bebidas_calientes",label:"Bebidas Calientes"}],em={desayunos:L.A,menu_del_dia:I.A,platos_especiales:$.A,bebidas:L.A};function ex(){var e;let[a,s]=(0,r.useState)("menu_del_dia"),[i,l]=(0,r.useState)([]),[n,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)("orderType"),[f,j]=(0,r.useState)({name:"",email:"",phone:"",address:"",notes:"",tableNumber:"",orderType:""}),[y,w]=(0,r.useState)(""),[C,k]=(0,r.useState)(""),D=(0,r.useRef)({}),[P,O]=(0,r.useState)(!1),[L,$]=(0,r.useState)(""),[Q,X]=(0,r.useState)(!1),[et,er]=(0,r.useState)({}),[ex,ep]=(0,r.useState)(null),[eb,eu]=(0,r.useState)(!0),[eh,ef]=(0,r.useState)([]);(0,r.useEffect)(()=>{fetch("/api/admin/menu").then(e=>e.json()).then(e=>{ep(e),eu(!1)}).catch(()=>eu(!1))},[]),(0,r.useEffect)(()=>{let e=new Date().getDay();0===e||6===e?s("platos_especiales"):s("menu_del_dia")},[]),(0,r.useEffect)(()=>{P&&Q&&eT()},[P,Q]),(0,r.useEffect)(()=>{if(!ex)return;let e={};Object.entries(ex).forEach(a=>{let[s,t]=a;Array.isArray(t)?t.forEach(a=>{e[a.id]=!0}):"object"==typeof t&&null!==t&&Object.values(t).forEach(a=>{Array.isArray(a)&&a.forEach(a=>{e[a.id]=!0})})}),er(e)},[ex]);let eg=[{key:"desayunos",label:"Desayunos"},{key:"menu_del_dia",label:"Men\xfa del d\xeda"},{key:"platos_especiales",label:"Platos especiales"},{key:"bebidas",label:"Bebidas"}];eg.filter(e=>et[e.key]),(0,r.useEffect)(()=>{if("platos_especiales"!==a)return;let e=()=>{let e=window.scrollY+200,a="";eo.forEach(s=>{let t=D.current[s.key];t&&e>=t.getBoundingClientRect().top+window.scrollY&&(a=s.key)}),k(a)};return window.addEventListener("scroll",e),e(),()=>window.removeEventListener("scroll",e)},[a]);let ej=e=>{l(a=>a.find(a=>a.id===e.id)?a.map(a=>a.id===e.id?{...a,quantity:a.quantity+1}:a):[...a,{...e,quantity:1}])},ey=(e,a)=>{0===a?eN(e):l(s=>s.map(s=>s.id===e?{...s,quantity:a}:s))},eN=e=>{l(a=>a.filter(a=>a.id!==e))},ev=()=>i.reduce((e,a)=>e+a.quantity,0),ew=()=>{let e=i.reduce((e,a)=>e+a.precio*a.quantity,0);return"delivery"===f.orderType?e+1e4:e},eC=()=>ew()/1.19,ek=()=>ew()-eC(),e_=()=>{"cart"===o?c("orderType"):"orderType"===o?c("info"):"info"===o&&(w("ORD"+Math.random().toString(36).substr(2,9).toUpperCase()),c("confirmation"),l([]))},eA=()=>"platos_especiales"===a?null:ex[a],eT=async()=>{let e=await fetch("/api/admin/platos"),a=await e.json();ef(a);let s={desayunos:[],menu_del_dia:[],platos_especiales:{carnes_y_parrilla:[],pollo:[],cerdo:[],pescados_y_mariscos:[]},bebidas:{bebidas_naturales:[],bebidas_comerciales:[],bebidas_calientes:[]}};a.forEach(e=>{let a=e.categoria;a in s?s[a].push(e):a in s.platos_especiales?s.platos_especiales[a].push(e):a in s.bebidas&&s.bebidas[a].push(e)}),ep(s);let t={};a.forEach(e=>{t[String(e.id)]=1===e.visible}),er(t)},eF=em[a],[eS,eD]=(0,r.useState)({category:eg[0].key,subcategory:"",name:"",description:"",price:""}),eP=e=>"platos_especiales"===e?eo:"bebidas"===e?ec:[],eR=async(e,a)=>{await fetch("/api/admin/platos/".concat(e,"/visibilidad"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({visible:a})}),await eT(),ep(await fetch("/api/admin/menu").then(e=>e.json()))};return eb||!ex?(0,t.jsx)("div",{className:"p-8 text-center text-amber-700",children:"Cargando men\xfa..."}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-orange-50 to-red-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-md sticky top-0 z-10",children:(0,t.jsxs)("div",{className:"px-4 py-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-amber-700",children:"Barril 360"}),(0,t.jsxs)(N,{open:n,onOpenChange:d,children:[(0,t.jsx)(v,{asChild:!0,children:(0,t.jsxs)(m,{variant:"outline",size:"sm",className:"relative border-amber-200 text-amber-700",children:[(0,t.jsx)(M.A,{className:"w-4 h-4"}),ev()>0&&(0,t.jsx)(g,{className:"absolute -top-2 -right-2 bg-amber-700 text-white text-xs w-5 h-5 rounded-full p-0 flex items-center justify-center",children:ev()})]})}),(0,t.jsxs)(_,{side:"right",className:"w-full sm:max-w-md",children:["orderType"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(A,{children:[(0,t.jsx)(T,{children:"Tipo de Pedido"}),(0,t.jsx)(F,{children:"\xbfC\xf3mo deseas recibir tu pedido?"})]}),(0,t.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,t.jsx)(m,{variant:"table"===f.orderType?"default":"outline",onClick:()=>j(e=>({...e,orderType:"table"})),className:"h-16 ".concat("table"===f.orderType?"bg-amber-700 hover:bg-amber-800":"border-amber-200 text-amber-700 hover:bg-amber-50"),children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(I.A,{className:"w-6 h-6 mx-auto mb-1"}),(0,t.jsx)("div",{className:"font-semibold",children:"Comer en Mesa"}),(0,t.jsx)("div",{className:"text-xs opacity-75",children:"Servicio en restaurante"})]})}),(0,t.jsx)(m,{variant:"delivery"===f.orderType?"default":"outline",onClick:()=>j(e=>({...e,orderType:"delivery"})),className:"h-16 ".concat("delivery"===f.orderType?"bg-amber-700 hover:bg-amber-800":"border-amber-200 text-amber-700 hover:bg-amber-50"),children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(q.A,{className:"w-6 h-6 mx-auto mb-1"}),(0,t.jsx)("div",{className:"font-semibold",children:"Domicilio"}),(0,t.jsx)("div",{className:"text-xs opacity-75",children:"Entrega a tu direcci\xf3n"})]})})]}),(0,t.jsxs)("div",{className:"flex gap-2 mt-6",children:[(0,t.jsx)(m,{variant:"outline",onClick:()=>c("cart"),className:"flex-1",children:"Atr\xe1s"}),(0,t.jsx)(m,{onClick:e_,className:"flex-1 bg-amber-700 hover:bg-amber-800",disabled:!f.orderType,children:"Continuar"})]})]})]}),"cart"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(A,{children:[(0,t.jsx)(T,{children:"Tu Pedido"}),(0,t.jsx)(F,{children:"Revisa tus productos antes de continuar"})]}),(0,t.jsx)("div",{className:"mt-6 space-y-4",children:0===i.length?(0,t.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Tu carrito est\xe1 vac\xedo"}):(0,t.jsxs)(t.Fragment,{children:[i.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-medium text-sm",children:e.nombre}),(0,t.jsx)("p",{className:"text-amber-700 font-semibold",children:void 0!==e.pr?"$".concat(e.precio.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})):"Precio no disponible"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m,{variant:"outline",size:"sm",onClick:()=>ey(e.id,e.quantity-1),className:"w-8 h-8 p-0",children:(0,t.jsx)(V.A,{className:"w-3 h-3"})}),(0,t.jsx)("span",{className:"w-8 text-center",children:e.quantity}),(0,t.jsx)(m,{variant:"outline",size:"sm",onClick:()=>ey(e.id,e.quantity+1),className:"w-8 h-8 p-0",children:(0,t.jsx)(B.A,{className:"w-3 h-3"})}),(0,t.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>eN(e.id),className:"w-8 h-8 p-0 text-red-500",children:(0,t.jsx)(U.A,{className:"w-3 h-3"})})]})]},e.id)),(0,t.jsx)(z,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Subtotal (sin IVA):"}),(0,t.jsx)("span",{children:"number"==typeof eC()?"$".concat(eC().toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})):"$0"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"IVA (19%):"}),(0,t.jsx)("span",{children:"number"==typeof ek()?"$".concat(ek().toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})):"$0"})]}),(0,t.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[(0,t.jsx)("span",{children:"Total:"}),(0,t.jsx)("span",{children:"number"==typeof ew()?"$".concat(ew().toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})):"$0"})]})]}),"delivery"===f.orderType&&(0,t.jsxs)("div",{className:"bg-amber-100 border border-amber-300 text-amber-800 rounded p-2 mb-2 text-center text-sm",children:["Se agregar\xe1 un cargo de domicilio de $",1e4.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})," al total."]}),(0,t.jsx)(m,{onClick:e_,className:"w-full bg-amber-700 hover:bg-amber-800",disabled:0===i.length,children:"Continuar"})]})})]}),"info"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(A,{children:[(0,t.jsx)(T,{children:"Informaci\xf3n del Cliente"}),(0,t.jsx)(F,{children:"delivery"===f.orderType?"Por favor proporciona tus datos para el domicilio":"Por favor proporciona tus datos para el pedido en mesa"})]}),"delivery"===f.orderType&&(0,t.jsxs)("div",{className:"bg-amber-100 border border-amber-300 text-amber-800 rounded p-2 mb-2 text-center text-sm",children:["Recuerda: se agregar\xe1 un cargo de domicilio de $",1e4.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})," al total de tu pedido."]}),(0,t.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(R,{htmlFor:"name",children:"Nombre Completo"}),(0,t.jsx)(S,{id:"name",value:f.name,onChange:e=>j(a=>({...a,name:e.target.value})),placeholder:"Ingresa tu nombre completo"})]}),"delivery"===f.orderType&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(R,{htmlFor:"email",children:"Correo Electr\xf3nico"}),(0,t.jsx)(S,{id:"email",type:"email",value:f.email,onChange:e=>j(a=>({...a,email:e.target.value})),placeholder:"Ingresa tu correo electr\xf3nico"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(R,{htmlFor:"phone",children:"N\xfamero de Tel\xe9fono"}),(0,t.jsx)(S,{id:"phone",value:f.phone,onChange:e=>j(a=>({...a,phone:e.target.value})),placeholder:"Ingresa tu n\xfamero de tel\xe9fono"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(R,{htmlFor:"address",children:"Direcci\xf3n de Entrega"}),(0,t.jsx)(E,{id:"address",value:f.address,onChange:e=>j(a=>({...a,address:e.target.value})),placeholder:"Ingresa tu direcci\xf3n completa",rows:3})]})]}),"table"===f.orderType&&(0,t.jsxs)("div",{children:[(0,t.jsx)(R,{htmlFor:"tableNumber",children:"N\xfamero de Mesa"}),(0,t.jsx)(S,{id:"tableNumber",value:f.tableNumber,onChange:e=>j(a=>({...a,tableNumber:e.target.value})),placeholder:"Ingresa el n\xfamero de tu mesa"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(R,{htmlFor:"notes",children:"Instrucciones Especiales (Opcional)"}),(0,t.jsx)(E,{id:"notes",value:f.notes,onChange:e=>j(a=>({...a,notes:e.target.value})),placeholder:"Solicitudes especiales o restricciones alimentarias",rows:2})]}),(0,t.jsx)(z,{}),(0,t.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,t.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,t.jsx)("span",{children:"Total del Pedido:"}),(0,t.jsxs)("span",{children:["$","number"==typeof ew()?ew().toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0}):"0"]})]})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(m,{variant:"outline",onClick:()=>c("orderType"),className:"flex-1",children:"Atr\xe1s"}),(0,t.jsxs)(m,{onClick:e_,className:"flex-1 bg-amber-700 hover:bg-amber-800",disabled:!f.name||"delivery"===f.orderType&&(!f.email||!f.phone||!f.address)||"table"===f.orderType&&!f.tableNumber,children:[(0,t.jsx)(Y.A,{className:"w-4 h-4 mr-2"}),"Realizar Pedido"]})]})]})]}),"confirmation"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(A,{children:[(0,t.jsx)(T,{children:"\xa1Pedido Confirmado!"}),(0,t.jsx)(F,{children:"Gracias por tu pedido"})]}),(0,t.jsxs)("div",{className:"mt-6 text-center space-y-4",children:[(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"text-green-600 font-semibold text-lg",children:["Pedido #",y]}),(0,t.jsx)("p",{className:"text-green-700 text-sm mt-1",children:"Tu pedido ha sido recibido y est\xe1 siendo preparado"})]}),(0,t.jsxs)("div",{className:"space-y-2 text-left",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(J.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm",children:f.name})]}),"delivery"===f.orderType&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(H.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm",children:f.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(G.A,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"text-sm",children:f.phone})]}),(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(q.A,{className:"w-4 h-4 text-gray-500 mt-0.5"}),(0,t.jsx)("span",{className:"text-sm",children:f.address})]})]}),"table"===f.orderType&&(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)(q.A,{className:"w-4 h-4 text-gray-500 mt-0.5"}),(0,t.jsxs)("span",{className:"text-sm",children:["Mesa #",f.tableNumber]})]})]}),(0,t.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:[(0,t.jsxs)("p",{className:"text-amber-800 text-sm",children:[(0,t.jsx)("strong",{children:"Tiempo estimado:"})," ","delivery"===f.orderType?"45-60 minutos":"15-25 minutos"]}),(0,t.jsx)("p",{className:"text-amber-800 text-sm mt-1",children:"delivery"===f.orderType?"Tu pedido ser\xe1 entregado en: ".concat(f.address):"Tu pedido se entregar\xe1 en tu mesa, n\xfamero #".concat(f.tableNumber)})]}),(0,t.jsx)(m,{onClick:()=>{c("cart"),j({name:"",email:"",phone:"",address:"",notes:"",tableNumber:"",orderType:""}),d(!1)},className:"w-full bg-amber-700 hover:bg-amber-800",children:"Continuar Comprando"})]})]})]})]})]}),(0,t.jsx)("nav",{className:"grid grid-cols-2 gap-2",children:eg.map(e=>(0,t.jsx)(m,{variant:a===e.key?"default":"outline",size:"sm",onClick:()=>s(e.key),className:"text-xs h-12 ".concat(a===e.key?"bg-amber-700 hover:bg-amber-800":"border-amber-200 text-amber-700 hover:bg-amber-50"),children:e.label},e.key))})]})}),(0,t.jsxs)("main",{className:"px-4 py-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center mb-6",children:[(0,t.jsx)(eF,{className:"w-6 h-6 text-amber-700 mr-2"}),(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-800 capitalize",children:null===(e=eg.find(e=>e.key===a))||void 0===e?void 0:e.label})]}),"bebidas"===a&&(0,t.jsx)("div",{className:"space-y-8",children:ec.map(e=>{let s=ex[a][e.key]||[];return(0,t.jsxs)("div",{ref:a=>D.current[e.key]=a,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-amber-700 mb-2",children:e.label}),(0,t.jsx)("div",{className:"w-20 h-1 bg-amber-700 mx-auto rounded"})]}),Array.isArray(s)&&s.length>0?(0,t.jsx)("div",{className:"space-y-4",children:s.filter(e=>et[e.id]).map(e=>(0,t.jsxs)(x,{className:"shadow-sm border-amber-100",children:[(0,t.jsx)(p,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)(b,{className:"text-lg text-gray-800 flex items-center gap-2",children:[e.nombre,e.popular&&(0,t.jsx)(g,{variant:"secondary",className:"bg-amber-100 text-amber-700 text-xs",children:"Popular"})]}),(0,t.jsx)("span",{className:"text-lg font-bold text-amber-700",children:"number"==typeof e.precio?"$".concat(e.precio.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})):"Precio no disponible"})]})}),(0,t.jsxs)(h,{className:"pt-0",children:[(0,t.jsx)(u,{className:"text-gray-600 mb-3",children:e.descripcion}),(0,t.jsxs)(m,{onClick:()=>ej(e),size:"sm",className:"w-full bg-amber-700 hover:bg-amber-800",children:[(0,t.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Agregar al Carrito"]})]})]},e.id))}):(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No hay productos disponibles en esta categor\xeda"})})]},e.key)})}),"platos_especiales"!==a&&Array.isArray(eA())&&(0,t.jsx)("div",{className:"space-y-4",children:eA().filter(e=>et[e.id]).map(e=>(0,t.jsxs)(x,{className:"shadow-sm border-amber-100",children:[(0,t.jsx)(p,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)(b,{className:"text-lg text-gray-800 flex items-center gap-2",children:[e.nombre,e.popular&&(0,t.jsx)(g,{variant:"secondary",className:"bg-amber-100 text-amber-700 text-xs",children:"Popular"})]}),(0,t.jsx)("span",{className:"text-lg font-bold text-amber-700",children:"number"==typeof e.precio?"$".concat(e.precio.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})):"Precio no disponible"})]})}),(0,t.jsxs)(h,{className:"pt-0",children:["menu_del_dia"===a?(0,t.jsx)("div",{className:"text-gray-600 mb-3",children:(0,t.jsx)("ul",{className:"list-disc list-inside space-y-1",children:e.descripcion.split("\n").map((e,a)=>(0,t.jsx)("li",{className:"text-sm",children:e.replace("â€¢ ","")},a))})}):(0,t.jsx)(u,{className:"text-gray-600 mb-3",children:e.descripcion}),(0,t.jsxs)(m,{onClick:()=>ej(e),size:"sm",className:"w-full bg-amber-700 hover:bg-amber-800",children:[(0,t.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Agregar al Carrito"]})]})]},e.id))}),"platos_especiales"===a&&(0,t.jsx)("div",{className:"space-y-8",children:eo.map(e=>{let s=ex[a][e.key]||[];return(0,t.jsxs)("div",{ref:a=>D.current[e.key]=a,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"text-center py-4",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-amber-700 mb-2",children:e.label}),(0,t.jsx)("div",{className:"w-20 h-1 bg-amber-700 mx-auto rounded"})]}),s.filter(e=>et[e.id]).length>0?(0,t.jsx)("div",{className:"space-y-4",children:s.filter(e=>et[e.id]).map(e=>(0,t.jsxs)(x,{className:"shadow-sm border-amber-100",children:[(0,t.jsx)(p,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)(b,{className:"text-lg text-gray-800 flex items-center gap-2",children:[e.nombre,e.popular&&(0,t.jsx)(g,{variant:"secondary",className:"bg-amber-100 text-amber-700 text-xs",children:"Popular"})]}),(0,t.jsx)("span",{className:"text-lg font-bold text-amber-700",children:"number"==typeof e.precio?"$".concat(e.precio.toLocaleString("es-CO",{minimumFractionDigits:0,maximumFractionDigits:0})):"Precio no disponible"})]})}),(0,t.jsxs)(h,{className:"pt-0",children:[(0,t.jsx)(u,{className:"text-gray-600 mb-3",children:e.descripcion}),(0,t.jsxs)(m,{onClick:()=>ej(e),size:"sm",className:"w-full bg-amber-700 hover:bg-amber-800",children:[(0,t.jsx)(B.A,{className:"w-4 h-4 mr-2"}),"Agregar al Carrito"]})]})]},e.id))}):(0,t.jsx)("div",{className:"text-center py-8",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No hay productos disponibles en esta categor\xeda"})})]},e.key)})})]}),(0,t.jsx)(Z,{open:P,onOpenChange:e=>{O(e),$(""),X(!1)},children:(0,t.jsxs)(K,{children:[(0,t.jsx)(W,{children:(0,t.jsx)(ea,{children:"Panel de Administraci\xf3n"})}),Q?(0,t.jsxs)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[(0,t.jsx)("div",{className:"font-semibold mb-2",children:"Visibilidad de productos por categor\xeda:"}),(0,t.jsx)(ei,{type:"multiple",className:"w-full",children:eg.map(e=>{let a=[];return"platos_especiales"===e.key?(0,t.jsxs)(el,{value:e.key,children:[(0,t.jsx)(en,{children:e.label}),(0,t.jsx)(ed,{children:eo.map(e=>{let a=eh.filter(a=>a.categoria===e.key);return(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"font-semibold text-sm mb-1",children:e.label}),a.length>0?a.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("button",{onClick:async()=>{await eR(e.id,!et[e.id])},className:"px-2 py-1 rounded text-white ".concat(et[e.id]?"bg-red-500":"bg-green-500"),children:et[e.id]?"Ocultar":"Mostrar"}),(0,t.jsx)("span",{children:e.nombre})]},e.id)):(0,t.jsx)("span",{className:"text-gray-400 text-xs",children:"Sin platos"})]},e.key)})})]},e.key):"bebidas"===e.key?(0,t.jsxs)(el,{value:e.key,children:[(0,t.jsx)(en,{children:e.label}),(0,t.jsx)(ed,{children:ec.map(e=>{let a=eh.filter(a=>a.categoria===e.key);return(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsx)("div",{className:"font-semibold text-sm mb-1",children:e.label}),a.length>0?a.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("button",{onClick:async()=>{await eR(e.id,!et[e.id])},className:"px-2 py-1 rounded text-white ".concat(et[e.id]?"bg-red-500":"bg-green-500"),children:et[e.id]?"Ocultar":"Mostrar"}),(0,t.jsx)("span",{children:e.nombre})]},e.id)):(0,t.jsx)("span",{className:"text-gray-400 text-xs",children:"Sin bebidas"})]},e.key)})})]},e.key):(a=eh.filter(a=>a.categoria===e.key),(0,t.jsxs)(el,{value:e.key,children:[(0,t.jsx)(en,{children:e.label}),(0,t.jsx)(ed,{children:a.length>0?a.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("button",{onClick:async()=>{await eR(e.id,!et[e.id])},className:"px-2 py-1 rounded text-white ".concat(et[e.id]?"bg-red-500":"bg-green-500"),children:et[e.id]?"Ocultar":"Mostrar"}),(0,t.jsx)("span",{children:e.nombre})]},e.id)):(0,t.jsx)("span",{className:"text-gray-400 text-xs",children:"Sin platos"})})]},e.key))})}),Q&&(0,t.jsx)("div",{className:"border-t pt-4 mt-4",children:(0,t.jsx)(ei,{type:"single",collapsible:!0,className:"w-full mt-4",children:(0,t.jsxs)(el,{value:"nuevo-plato",children:[(0,t.jsx)(en,{children:(0,t.jsx)("span",{className:"font-semibold",children:"Crear nuevo plato"})}),(0,t.jsx)(ed,{children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(R,{children:"Categor\xeda"}),(0,t.jsx)("select",{className:"w-full border rounded px-2 py-1",value:eS.category,onChange:e=>eD(a=>({...a,category:e.target.value,subcategory:""})),children:eg.map(e=>(0,t.jsx)("option",{value:e.key,children:e.label},e.key))}),eP(eS.category).length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R,{children:"Subcategor\xeda"}),(0,t.jsxs)("select",{className:"w-full border rounded px-2 py-1",value:eS.subcategory,onChange:e=>eD(a=>({...a,subcategory:e.target.value})),children:[(0,t.jsx)("option",{value:"",children:"Selecciona una subcategor\xeda"}),eP(eS.category).map(e=>(0,t.jsx)("option",{value:e.key,children:e.label},e.key))]})]}),(0,t.jsx)(R,{children:"Nombre"}),(0,t.jsx)(S,{value:eS.name,onChange:e=>eD(a=>({...a,name:e.target.value})),placeholder:"Nombre del plato"}),(0,t.jsx)(R,{children:"Descripci\xf3n"}),(0,t.jsx)(E,{value:eS.description,onChange:e=>eD(a=>({...a,description:e.target.value})),placeholder:"Descripci\xf3n",rows:2}),(0,t.jsx)(R,{children:"Precio"}),(0,t.jsx)(S,{type:"number",min:0,value:eS.price,onChange:e=>eD(a=>({...a,price:e.target.value})),placeholder:"Precio"}),(0,t.jsx)(m,{className:"w-full bg-amber-700 hover:bg-amber-800 mt-2",disabled:!eS.name||!eS.price||eP(eS.category).length>0&&!eS.subcategory,onClick:async()=>{let e={...eS,price:Number(eS.price)};(await fetch("/api/admin/platos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?(ep(await fetch("/api/admin/menu").then(e=>e.json())),eD({category:eg[0].key,subcategory:"",name:"",description:"",price:""})):alert("Error al guardar el plato")},children:"Guardar Cambios"})]})})]})})}),(0,t.jsx)(ee,{children:(0,t.jsx)(m,{onClick:()=>{O(!1),X(!1),$("")},className:"bg-amber-700 hover:bg-amber-800 w-full",children:"Cerrar Panel"})})]}):(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"5564"===L?X(!0):alert("PIN incorrecto")},className:"space-y-4",children:[(0,t.jsx)(R,{htmlFor:"admin-pin",children:"Ingresa el PIN de administrador"}),(0,t.jsx)(S,{id:"admin-pin",type:"password",value:L,onChange:e=>$(e.target.value),autoFocus:!0,maxLength:8,className:"w-full"}),(0,t.jsx)(ee,{children:(0,t.jsx)(m,{type:"submit",className:"bg-amber-700 hover:bg-amber-800 w-full",children:"Ingresar"})})]})]})}),(0,t.jsx)("footer",{className:"bg-amber-700 text-white py-6 px-4 mt-8",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4 sm:mb-0",children:[(0,t.jsx)(es.default,{src:"/barril360-bg.jpg",alt:"Barril 360 Logo",width:64,height:64,className:"rounded shadow",style:{background:"#fff"}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold mb-1",children:"Restaurante Barril 360"}),(0,t.jsx)("p",{className:"text-sm text-amber-100 mb-1",children:"Calle 123 #45-67, Centro"}),(0,t.jsx)("p",{className:"text-sm text-amber-100 mb-1",children:"Tel\xe9fono: (555) 123-4567"}),(0,t.jsx)("p",{className:"text-sm text-amber-100",children:"Abierto todos los d\xedas: 11:00 AM - 10:00 PM"})]})]}),(0,t.jsx)(m,{variant:"outline",size:"sm",className:"border-amber-200 text-amber-700 bg-white hover:bg-amber-50",onClick:()=>O(!0),children:"Admin"})]})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[130,441,684,358],()=>a(276)),_N_E=e.O()}]);